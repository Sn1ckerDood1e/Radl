---
phase: 23-dashboard-enhancements
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/dashboard/next-practice-widget.tsx
  - src/components/dashboard/usage-trends-widget.tsx
autonomous: true

must_haves:
  truths:
    - "Next Practice widget shows athlete's assignment (boat/seat or erg group)"
    - "Usage Trends widget displays sparkline with total hours label"
    - "Both widgets handle empty states appropriately"
  artifacts:
    - path: "src/components/dashboard/next-practice-widget.tsx"
      provides: "Athlete hero widget showing their next practice assignment"
      exports: ["NextPracticeWidget"]
    - path: "src/components/dashboard/usage-trends-widget.tsx"
      provides: "Equipment usage trends sparkline for coaches"
      exports: ["UsageTrendsWidget"]
  key_links:
    - from: "src/components/dashboard/next-practice-widget.tsx"
      to: "Assignment data"
      via: "props from page"
      pattern: "assignment.*boat|seat"
    - from: "src/components/dashboard/usage-trends-widget.tsx"
      to: "Sparkline component"
      via: "imports and renders"
      pattern: "import.*Sparkline"
---

<objective>
Create the athlete hero widget (NextPracticeWidget) and coach usage trends widget (UsageTrendsWidget).

Purpose: NextPracticeWidget is the athlete's primary dashboard - showing where they need to be. UsageTrendsWidget shows equipment usage over time via sparkline.
Output: Two display components completing the widget library for both dashboards.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/23-dashboard-enhancements/23-CONTEXT.md
@.planning/phases/23-dashboard-enhancements/23-RESEARCH.md
@src/components/equipment/fleet-health-widget.tsx (widget card pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NextPracticeWidget for athletes</name>
  <files>src/components/dashboard/next-practice-widget.tsx</files>
  <action>
Create the athlete hero widget showing their next practice and assignment.

Props:
```typescript
interface AthleteAssignment {
  blockType: 'WATER' | 'ERG' | 'LAND' | 'MEETING';
  // Water block specifics
  boatName?: string;
  boatClass?: string;
  seatPosition?: number;
  seatSide?: 'PORT' | 'STARBOARD' | null;
  // Land/erg block specifics
  groupName?: string;
}

interface NextPracticeWidgetProps {
  teamSlug: string;
  practice: {
    id: string;
    name: string;
    date: Date;
    startTime: Date;
    endTime: Date;
  } | null;
  assignment: AthleteAssignment | null;
  unassignedPracticeCount?: number;
}
```

Requirements:
- Hero-sized widget (larger than secondary widgets)
- If practice exists with assignment:
  - Show practice name, date, and time prominently
  - Show countdown to practice: "Today at 6:00 AM", "Tomorrow at 6:00 AM", "Friday at 6:00 AM (in 2 days)"
  - Show assignment details based on blockType:
    - WATER: "Boat Name - Seat 3 (Port)" or "Boat Name - Coxswain"
    - ERG: "Erg Group: Group A" or just "Erg Session"
    - LAND: "Land Training" or group name
    - MEETING: "Team Meeting"
  - Link to practice page: /${teamSlug}/practices/${practice.id}
- If practice exists without assignment:
  - Show practice info but note "Assignment pending"
- If no practice but unassignedPracticeCount > 0:
  - "You're not assigned to any upcoming practices yet"
  - "There are X upcoming practices - check with your coach"
- If no practice at all:
  - "No upcoming practices scheduled"
  - Friendly message (e.g., "Enjoy your time off!")

Use lucide-react icons: Calendar, Clock, Ship (boat), Dumbbell (erg)
  </action>
  <verify>
`npx tsc --noEmit` passes with no type errors.
  </verify>
  <done>
NextPracticeWidget shows athlete's next practice with their specific assignment or helpful empty states.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create UsageTrendsWidget with sparkline</name>
  <files>src/components/dashboard/usage-trends-widget.tsx</files>
  <action>
Create the Usage Trends widget that displays equipment usage over time via sparkline.

Props:
```typescript
interface UsageTrendsWidgetProps {
  teamSlug: string;
  sparklineData: number[];
  totalHours: number;
  seasonName?: string;
}
```

Requirements:
- Use standard widget card structure
- Header: "Equipment Usage" with link to /${teamSlug}/equipment
- Content:
  - Large total hours display: "X hours" this season
  - Sparkline showing weekly trend (use Sparkline component from Plan 01)
  - If seasonName provided, show it: "Fall 2026 Season"
- If sparklineData.length < 2:
  - Show "Not enough data yet" message instead of sparkline
  - Still show totalHours if > 0
- Sparkline styling:
  - Width: ~200px, Height: 40px
  - Color: emerald-400 or text-muted based on design preference

Import Sparkline from './sparkline' (created in Plan 01).

Note: This widget will only be shown to coaches per CONTEXT.md.
  </action>
  <verify>
`npx tsc --noEmit` passes with no type errors.
  </verify>
  <done>
UsageTrendsWidget displays total usage hours and weekly sparkline trend.
  </done>
</task>

</tasks>

<verification>
- Both components exist and export correctly
- TypeScript compilation succeeds: `npx tsc --noEmit`
- NextPracticeWidget handles: practice with water assignment, practice with erg assignment, practice without assignment, no practice with unassigned count, no practice at all
- UsageTrendsWidget handles: normal data (3+ weeks), minimal data (<2 weeks), zero hours
</verification>

<success_criteria>
- NextPracticeWidget shows athlete's next practice with boat/seat or erg group assignment
- NextPracticeWidget shows countdown to practice date
- UsageTrendsWidget displays total hours and sparkline trend
- Both widgets handle empty/edge states gracefully
</success_criteria>

<output>
After completion, create `.planning/phases/23-dashboard-enhancements/23-03-SUMMARY.md`
</output>
