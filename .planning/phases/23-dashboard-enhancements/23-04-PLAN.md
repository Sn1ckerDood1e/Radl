---
phase: 23-dashboard-enhancements
plan: 04
type: execute
wave: 2
depends_on: [23-01, 23-02, 23-03]
files_modified:
  - src/components/dashboard/coach-dashboard.tsx
  - src/components/dashboard/athlete-dashboard.tsx
autonomous: true

must_haves:
  truths:
    - "CoachDashboard renders hero schedule + secondary widgets in priority pattern"
    - "AthleteDashboard renders hero next-practice + announcements (focused layout)"
    - "Both dashboards are server components accepting pre-fetched data as props"
  artifacts:
    - path: "src/components/dashboard/coach-dashboard.tsx"
      provides: "Coach-specific dashboard layout"
      exports: ["CoachDashboard"]
    - path: "src/components/dashboard/athlete-dashboard.tsx"
      provides: "Athlete-specific dashboard layout"
      exports: ["AthleteDashboard"]
  key_links:
    - from: "src/components/dashboard/coach-dashboard.tsx"
      to: "Widget components"
      via: "imports and composition"
      pattern: "import.*(TodaysSchedule|FleetHealth|UsageTrends|QuickActions)"
    - from: "src/components/dashboard/athlete-dashboard.tsx"
      to: "Widget components"
      via: "imports and composition"
      pattern: "import.*(NextPractice|AnnouncementList)"
---

<objective>
Create the CoachDashboard and AthleteDashboard layout components that compose the widgets.

Purpose: These components implement the role-specific layouts from CONTEXT.md - coach gets comprehensive overview, athlete gets focused "where do I need to be" view.
Output: Two dashboard layout components ready to be routed from the main page.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/23-dashboard-enhancements/23-CONTEXT.md
@.planning/phases/23-dashboard-enhancements/23-RESEARCH.md
@src/components/equipment/fleet-health-widget.tsx
@src/components/announcements/announcement-list.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CoachDashboard component</name>
  <files>src/components/dashboard/coach-dashboard.tsx</files>
  <action>
Create the coach-specific dashboard layout implementing the priority hero pattern from CONTEXT.md.

Props:
```typescript
import type { ReadinessStatus } from '@/lib/equipment/readiness';

interface CoachDashboardProps {
  teamSlug: string;
  // Today's Schedule (hero)
  todaysPractices: Array<{
    id: string;
    name: string;
    startTime: Date;
    endTime: Date;
    athleteCount: number;
    blockCount: number;
  }>;
  nextPractice: {
    id: string;
    name: string;
    date: Date;
    startTime: Date;
  } | null;
  // Fleet Health (existing widget)
  statusCounts: Record<ReadinessStatus, number>;
  totalEquipment: number;
  // Usage Trends
  sparklineData: number[];
  totalUsageHours: number;
  seasonName?: string;
  // Quick Actions
  attentionItems: Array<{
    type: 'equipment_inspection' | 'lineup_needed' | 'practice_unpublished';
    count: number;
    label: string;
    href: string;
  }>;
  // Announcements
  announcements: Array<{
    id: string;
    title: string;
    body: string;
    priority: 'INFO' | 'WARNING' | 'URGENT';
    createdAt: string;
    isRead: boolean;
    practice: { id: string; name: string; date: string } | null;
  }>;
  // Damage reports
  openDamageReportCount: number;
}
```

Layout structure (from CONTEXT.md):
1. Welcome header (keep existing pattern)
2. Alert banner if openDamageReportCount > 0 (keep existing)
3. Hero: TodaysScheduleWidget (full width, prominent)
4. Secondary row: FleetHealthWidget + UsageTrendsWidget (2-column grid on desktop, stack on mobile)
5. QuickActionsWidget (full width)
6. AnnouncementList at bottom

Imports needed:
- TodaysScheduleWidget from './todays-schedule-widget'
- FleetHealthWidget from '@/components/equipment/fleet-health-widget'
- UsageTrendsWidget from './usage-trends-widget'
- QuickActionsWidget from './quick-actions-widget'
- AnnouncementList from '@/components/announcements/announcement-list'

Layout classes: max-w-5xl mx-auto, space-y-6 between sections, grid grid-cols-1 md:grid-cols-2 gap-6 for secondary row.
  </action>
  <verify>
`npx tsc --noEmit` passes with no type errors.
  </verify>
  <done>
CoachDashboard component composes widgets in priority hero pattern with proper responsive layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AthleteDashboard component</name>
  <files>src/components/dashboard/athlete-dashboard.tsx</files>
  <action>
Create the athlete-specific dashboard layout - simple, focused "where do I need to be" view.

Props:
```typescript
interface AthleteDashboardProps {
  teamSlug: string;
  // Next Practice (hero)
  nextPractice: {
    id: string;
    name: string;
    date: Date;
    startTime: Date;
    endTime: Date;
  } | null;
  assignment: {
    blockType: 'WATER' | 'ERG' | 'LAND' | 'MEETING';
    boatName?: string;
    boatClass?: string;
    seatPosition?: number;
    seatSide?: 'PORT' | 'STARBOARD' | null;
    groupName?: string;
  } | null;
  unassignedPracticeCount: number;
  // Announcements
  announcements: Array<{
    id: string;
    title: string;
    body: string;
    priority: 'INFO' | 'WARNING' | 'URGENT';
    createdAt: string;
    isRead: boolean;
    practice: { id: string; name: string; date: string } | null;
  }>;
}
```

Layout structure (from CONTEXT.md - simple, focused):
1. Welcome header (simpler version)
2. Hero: NextPracticeWidget (full width, prominent - this is their primary info)
3. AnnouncementList (if any announcements exist)

No fleet health, no usage trends, no quick actions - athletes just need to know where to be.

Imports needed:
- NextPracticeWidget from './next-practice-widget'
- AnnouncementList from '@/components/announcements/announcement-list'

Layout classes: max-w-3xl mx-auto (narrower than coach), space-y-6 between sections.

Note: Keep athlete dashboard simple and focused per CONTEXT.md guidance.
  </action>
  <verify>
`npx tsc --noEmit` passes with no type errors.
  </verify>
  <done>
AthleteDashboard component shows focused view with next practice + announcements only.
  </done>
</task>

</tasks>

<verification>
- Both components exist and export correctly
- TypeScript compilation succeeds: `npx tsc --noEmit`
- CoachDashboard renders all widgets in correct priority order
- AthleteDashboard renders only NextPractice + Announcements (simple, focused)
- Responsive layout works (2-col on desktop, stack on mobile for coach secondary widgets)
</verification>

<success_criteria>
- CoachDashboard implements priority hero pattern: Schedule hero -> Fleet + Usage grid -> Quick Actions -> Announcements
- AthleteDashboard implements focused layout: Next Practice hero -> Announcements
- Both accept pre-fetched data as props (no data fetching in components)
- Responsive layout working
</success_criteria>

<output>
After completion, create `.planning/phases/23-dashboard-enhancements/23-04-SUMMARY.md`
</output>
