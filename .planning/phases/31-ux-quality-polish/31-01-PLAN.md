---
phase: 31-ux-quality-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(auth)/login/page.tsx
  - src/app/(auth)/signup/page.tsx
  - src/components/athletes/athlete-form.tsx
autonomous: true

must_haves:
  truths:
    - "Login form shows validation errors when user tabs out of an invalid field"
    - "Signup form shows validation errors when user tabs out of an invalid field"
    - "Athlete profile form shows validation errors when user tabs out of an invalid field"
  artifacts:
    - path: "src/app/(auth)/login/page.tsx"
      provides: "Login form with onTouched validation"
      contains: "mode: 'onTouched'"
    - path: "src/app/(auth)/signup/page.tsx"
      provides: "Signup form with onTouched validation"
      contains: "mode: 'onTouched'"
    - path: "src/components/athletes/athlete-form.tsx"
      provides: "Athlete form with onTouched validation"
      contains: "mode: 'onTouched'"
  key_links:
    - from: "useForm hook"
      to: "validation trigger"
      via: "mode: 'onTouched' option"
      pattern: "mode:\\s*['\"]onTouched['\"]"
---

<objective>
Standardize form validation to show inline errors immediately when users interact with fields, not just on submission.

Purpose: Users should see validation feedback as they fill out forms (UXQL-04), enabling them to fix errors before attempting submission. This reduces frustration and failed submit attempts.

Output: Login, signup, and athlete profile forms all use `mode: 'onTouched'` with `reValidateMode: 'onChange'` for immediate, responsive validation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-ux-quality-polish/31-RESEARCH.md

# Files to modify
@src/app/(auth)/login/page.tsx
@src/app/(auth)/signup/page.tsx
@src/components/athletes/athlete-form.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update login and signup form validation modes</name>
  <files>src/app/(auth)/login/page.tsx, src/app/(auth)/signup/page.tsx</files>
  <action>
Update both auth forms to use immediate validation on field interaction:

**login/page.tsx** (around line 18):
Change from:
```typescript
} = useForm<LoginInput>({
  resolver: zodResolver(loginSchema),
});
```

To:
```typescript
} = useForm<LoginInput>({
  mode: 'onTouched',
  reValidateMode: 'onChange',
  resolver: zodResolver(loginSchema),
});
```

**signup/page.tsx** (around line 54):
Change from:
```typescript
} = useForm<SignupInput>({
  resolver: zodResolver(signupSchema),
});
```

To:
```typescript
} = useForm<SignupInput>({
  mode: 'onTouched',
  reValidateMode: 'onChange',
  resolver: zodResolver(signupSchema),
});
```

Why these settings:
- `mode: 'onTouched'` - Validates a field when it loses focus (user tabs/clicks away)
- `reValidateMode: 'onChange'` - Once an error is shown, re-validates on every keystroke so user sees error clear immediately when they fix it
  </action>
  <verify>
1. `grep -n "mode: 'onTouched'" src/app/\(auth\)/login/page.tsx` returns a match
2. `grep -n "mode: 'onTouched'" src/app/\(auth\)/signup/page.tsx` returns a match
3. `npm run build` completes without type errors
  </verify>
  <done>
Both login and signup forms validate fields on blur and re-validate on change after an error is shown.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update athlete profile form validation mode</name>
  <files>src/components/athletes/athlete-form.tsx</files>
  <action>
Update the athlete profile form to use immediate validation:

**athlete-form.tsx** (around line 36):
Change from:
```typescript
} = useForm<UpdateAthleteProfileInput>({
  resolver: zodResolver(updateAthleteProfileSchema),
  defaultValues: {
```

To:
```typescript
} = useForm<UpdateAthleteProfileInput>({
  mode: 'onTouched',
  reValidateMode: 'onChange',
  resolver: zodResolver(updateAthleteProfileSchema),
  defaultValues: {
```

This ensures the athlete profile form behaves consistently with the auth forms.
  </action>
  <verify>
1. `grep -n "mode: 'onTouched'" src/components/athletes/athlete-form.tsx` returns a match
2. `npm run build` completes without errors
  </verify>
  <done>
Athlete profile form validates fields on blur and re-validates on change after an error is shown.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run build` succeeds
2. All three files contain `mode: 'onTouched'` and `reValidateMode: 'onChange'`
3. Manual test: Visit /login, enter invalid email, tab to password field - error should appear immediately under email field
</verification>

<success_criteria>
- Login form shows inline validation errors on field blur
- Signup form shows inline validation errors on field blur
- Athlete profile form shows inline validation errors on field blur
- No TypeScript or build errors introduced
</success_criteria>

<output>
After completion, create `.planning/phases/31-ux-quality-polish/31-01-SUMMARY.md`
</output>
