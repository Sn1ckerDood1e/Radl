---
phase: 17-facility-ui-features
plan: 04
type: execute
wave: 2
depends_on: [17-01, 17-02]
files_modified:
  - src/app/(dashboard)/facility/[facilitySlug]/equipment/page.tsx
  - src/app/(dashboard)/facility/[facilitySlug]/equipment/loading.tsx
  - src/app/(dashboard)/facility/[facilitySlug]/equipment/new/page.tsx
  - src/app/api/facility/[facilityId]/equipment/route.ts
autonomous: true

must_haves:
  truths:
    - "Facility admin can view all facility-owned equipment"
    - "Facility admin can create new facility-owned equipment"
    - "Equipment list shows availability status"
    - "API validates FACILITY_ADMIN role before allowing changes"
  artifacts:
    - path: "src/app/(dashboard)/facility/[facilitySlug]/equipment/page.tsx"
      provides: "Facility equipment list page"
      min_lines: 100
    - path: "src/app/(dashboard)/facility/[facilitySlug]/equipment/new/page.tsx"
      provides: "Create facility equipment page"
      min_lines: 80
    - path: "src/app/api/facility/[facilityId]/equipment/route.ts"
      provides: "API endpoints for facility equipment CRUD"
      exports: ["GET", "POST"]
  key_links:
    - from: "new/page.tsx"
      to: "/api/facility/[facilityId]/equipment"
      via: "fetch POST"
      pattern: "fetch.*facility.*equipment"
---

<objective>
Create facility equipment management pages and API for shared equipment CRUD.

Purpose: Facility admins need to manage facility-owned shared equipment that can be booked by clubs (FAC-06).

Output: Equipment list page, create equipment page, and API endpoints for facility equipment management.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/17-facility-ui-features/17-CONTEXT.md
@src/app/(dashboard)/[teamSlug]/equipment/page.tsx
@prisma/schema.prisma
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create facility equipment list page</name>
  <files>src/app/(dashboard)/facility/[facilitySlug]/equipment/page.tsx, src/app/(dashboard)/facility/[facilitySlug]/equipment/loading.tsx</files>
  <action>
Create the equipment list page at `src/app/(dashboard)/facility/[facilitySlug]/equipment/page.tsx`:

```tsx
import { redirect } from 'next/navigation';
import Link from 'next/link';
import { Ship, Plus, ArrowLeft, AlertTriangle, CheckCircle } from 'lucide-react';
import { getClaimsForApiRoute } from '@/lib/auth/claims';
import { prisma } from '@/lib/prisma';

interface EquipmentPageProps {
  params: Promise<{ facilitySlug: string }>;
}

export default async function FacilityEquipmentPage({ params }: EquipmentPageProps) {
  const { facilitySlug } = await params;

  // Auth checks
  const { user, viewMode, error } = await getClaimsForApiRoute();
  if (error || !user) redirect('/login');
  if (viewMode !== 'facility') redirect('/');

  // Get facility and verify admin
  const facility = await prisma.facility.findUnique({
    where: { slug: facilitySlug },
    select: { id: true, name: true },
  });
  if (!facility) redirect('/');

  const membership = await prisma.facilityMembership.findFirst({
    where: {
      facilityId: facility.id,
      userId: user.id,
      isActive: true,
      roles: { has: 'FACILITY_ADMIN' },
    },
  });
  if (!membership) redirect('/');

  // Get facility-owned equipment
  const equipment = await prisma.equipment.findMany({
    where: {
      facilityId: facility.id,
      ownerType: 'FACILITY',
    },
    include: {
      damageReports: {
        where: { status: 'OPEN' },
        select: { id: true },
      },
    },
    orderBy: [{ type: 'asc' }, { name: 'asc' }],
  });

  // Group by type
  const typeGroups = equipment.reduce((acc, item) => {
    const group = acc[item.type] || [];
    group.push(item);
    acc[item.type] = group;
    return acc;
  }, {} as Record<string, typeof equipment>);

  const typeLabels: Record<string, string> = {
    SHELL: 'Boats',
    OAR: 'Oars',
    LAUNCH: 'Launches',
    OTHER: 'Other Equipment',
  };

  return (
    <div className="max-w-6xl mx-auto">
      {/* Header */}
      <div className="flex items-center justify-between mb-8">
        <div>
          <div className="flex items-center gap-3 mb-2">
            <Link
              href={`/facility/${facilitySlug}`}
              className="text-[var(--text-muted)] hover:text-[var(--text-secondary)] transition-colors"
            >
              <ArrowLeft className="h-5 w-5" />
            </Link>
            <Ship className="h-6 w-6 text-[var(--accent)]" />
            <h1 className="text-2xl font-bold text-[var(--text-primary)]">Shared Equipment</h1>
          </div>
          <p className="text-[var(--text-secondary)]">
            Facility-owned equipment available to all clubs
          </p>
        </div>
        <Link
          href={`/facility/${facilitySlug}/equipment/new`}
          className="inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-500 transition-colors"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Equipment
        </Link>
      </div>

      {/* Equipment list */}
      {equipment.length === 0 ? (
        <div className="bg-[var(--surface-1)] rounded-xl p-8 text-center border border-[var(--border-subtle)]">
          <Ship className="h-12 w-12 text-[var(--text-muted)] mx-auto mb-4" />
          <h3 className="text-lg font-medium text-[var(--text-primary)] mb-2">No shared equipment</h3>
          <p className="text-[var(--text-muted)] mb-4">
            Add facility-owned equipment that clubs can reserve for practices.
          </p>
          <Link
            href={`/facility/${facilitySlug}/equipment/new`}
            className="inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-500 transition-colors"
          >
            <Plus className="h-5 w-5 mr-2" />
            Add First Equipment
          </Link>
        </div>
      ) : (
        <div className="space-y-8">
          {['SHELL', 'OAR', 'LAUNCH', 'OTHER'].map((type) => {
            const items = typeGroups[type];
            if (!items || items.length === 0) return null;

            return (
              <div key={type}>
                <h2 className="text-lg font-semibold text-[var(--text-primary)] mb-4">
                  {typeLabels[type]} ({items.length})
                </h2>
                <div className="bg-[var(--surface-1)] rounded-xl border border-[var(--border-subtle)] divide-y divide-[var(--border-subtle)]">
                  {items.map((item) => {
                    const hasOpenDamage = item.damageReports.length > 0;
                    const isUnavailable = item.manualUnavailable || hasOpenDamage || item.status !== 'ACTIVE';

                    return (
                      <Link
                        key={item.id}
                        href={`/facility/${facilitySlug}/equipment/${item.id}`}
                        className="flex items-center justify-between p-4 hover:bg-[var(--surface-2)] transition-colors"
                      >
                        <div className="flex items-center gap-3">
                          {isUnavailable ? (
                            <AlertTriangle className="h-5 w-5 text-amber-500" />
                          ) : (
                            <CheckCircle className="h-5 w-5 text-emerald-500" />
                          )}
                          <div>
                            <p className="font-medium text-[var(--text-primary)]">{item.name}</p>
                            <p className="text-sm text-[var(--text-muted)]">
                              {item.manufacturer && `${item.manufacturer} · `}
                              {item.boatClass && `${item.boatClass.replace(/_/g, ' ')} · `}
                              {item.status}
                            </p>
                          </div>
                        </div>
                        <div className="text-right">
                          {isUnavailable && (
                            <span className="text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-400">
                              {item.manualUnavailable ? 'Marked unavailable' : hasOpenDamage ? 'Damage reported' : 'Inactive'}
                            </span>
                          )}
                        </div>
                      </Link>
                    );
                  })}
                </div>
              </div>
            );
          })}
        </div>
      )}
    </div>
  );
}
```

Also create loading.tsx:
```tsx
import { Skeleton } from '@/components/ui/skeleton';

export default function EquipmentLoading() {
  return (
    <div className="max-w-6xl mx-auto">
      <div className="flex items-center justify-between mb-8">
        <div>
          <div className="flex items-center gap-3 mb-2">
            <Skeleton className="h-5 w-5" />
            <Skeleton className="h-6 w-6" />
            <Skeleton className="h-8 w-40" />
          </div>
          <Skeleton className="h-5 w-64" />
        </div>
        <Skeleton className="h-10 w-32" />
      </div>
      <div className="space-y-8">
        {[1, 2].map((g) => (
          <div key={g}>
            <Skeleton className="h-6 w-24 mb-4" />
            <div className="bg-[var(--surface-1)] rounded-xl border border-[var(--border-subtle)] divide-y divide-[var(--border-subtle)]">
              {[1, 2, 3].map((i) => (
                <div key={i} className="flex items-center justify-between p-4">
                  <div className="flex items-center gap-3">
                    <Skeleton className="h-5 w-5" />
                    <div>
                      <Skeleton className="h-5 w-32 mb-1" />
                      <Skeleton className="h-4 w-48" />
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```
  </action>
  <verify>Navigate to /facility/{facilitySlug}/equipment - should show equipment list grouped by type</verify>
  <done>Equipment list page shows facility-owned equipment with availability status</done>
</task>

<task type="auto">
  <name>Task 2: Create facility equipment API endpoint</name>
  <files>src/app/api/facility/[facilityId]/equipment/route.ts</files>
  <action>
Create API endpoint at `src/app/api/facility/[facilityId]/equipment/route.ts`:

```tsx
import { NextRequest, NextResponse } from 'next/server';
import { z } from 'zod';
import { getClaimsForApiRoute } from '@/lib/auth/claims';
import { prisma } from '@/lib/prisma';

const createEquipmentSchema = z.object({
  type: z.enum(['SHELL', 'OAR', 'LAUNCH', 'OTHER']),
  name: z.string().min(1, 'Name is required').max(100),
  manufacturer: z.string().max(100).optional().nullable(),
  serialNumber: z.string().max(100).optional().nullable(),
  yearAcquired: z.number().int().min(1900).max(2100).optional().nullable(),
  purchasePrice: z.number().positive().optional().nullable(),
  boatClass: z.enum([
    'SINGLE_1X', 'DOUBLE_2X', 'PAIR_2_MINUS', 'COXED_PAIR_2_PLUS',
    'FOUR_4_MINUS', 'COXED_FOUR_4_PLUS', 'QUAD_4X', 'EIGHT_8_PLUS', 'OTHER'
  ]).optional().nullable(),
  weightCategory: z.enum(['LIGHTWEIGHT', 'MIDWEIGHT', 'HEAVYWEIGHT']).optional().nullable(),
  notes: z.string().max(1000).optional().nullable(),
});

interface RouteContext {
  params: Promise<{ facilityId: string }>;
}

// GET /api/facility/[facilityId]/equipment - List facility equipment
export async function GET(request: NextRequest, context: RouteContext) {
  const { facilityId } = await context.params;

  const { user, viewMode, error } = await getClaimsForApiRoute();
  if (error || !user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }

  // Verify FACILITY_ADMIN role
  const membership = await prisma.facilityMembership.findFirst({
    where: {
      facilityId,
      userId: user.id,
      isActive: true,
      roles: { has: 'FACILITY_ADMIN' },
    },
  });

  if (!membership) {
    return NextResponse.json({ error: 'Forbidden' }, { status: 403 });
  }

  const equipment = await prisma.equipment.findMany({
    where: {
      facilityId,
      ownerType: 'FACILITY',
    },
    include: {
      damageReports: {
        where: { status: 'OPEN' },
        select: { id: true },
      },
    },
    orderBy: [{ type: 'asc' }, { name: 'asc' }],
  });

  return NextResponse.json({ equipment });
}

// POST /api/facility/[facilityId]/equipment - Create facility equipment
export async function POST(request: NextRequest, context: RouteContext) {
  const { facilityId } = await context.params;

  const { user, viewMode, error } = await getClaimsForApiRoute();
  if (error || !user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }

  // Verify FACILITY_ADMIN role
  const membership = await prisma.facilityMembership.findFirst({
    where: {
      facilityId,
      userId: user.id,
      isActive: true,
      roles: { has: 'FACILITY_ADMIN' },
    },
  });

  if (!membership) {
    return NextResponse.json({ error: 'Forbidden' }, { status: 403 });
  }

  // Verify facility exists
  const facility = await prisma.facility.findUnique({
    where: { id: facilityId },
  });

  if (!facility) {
    return NextResponse.json({ error: 'Facility not found' }, { status: 404 });
  }

  // Parse and validate body
  const body = await request.json();
  const validation = createEquipmentSchema.safeParse(body);

  if (!validation.success) {
    return NextResponse.json(
      { error: 'Validation failed', details: validation.error.flatten() },
      { status: 400 }
    );
  }

  const data = validation.data;

  // Create equipment
  const equipment = await prisma.equipment.create({
    data: {
      facilityId,
      ownerType: 'FACILITY',
      type: data.type,
      name: data.name,
      manufacturer: data.manufacturer,
      serialNumber: data.serialNumber,
      yearAcquired: data.yearAcquired,
      purchasePrice: data.purchasePrice,
      boatClass: data.boatClass,
      weightCategory: data.weightCategory,
      notes: data.notes,
      status: 'ACTIVE',
    },
  });

  return NextResponse.json({ equipment }, { status: 201 });
}
```
  </action>
  <verify>Test API with curl: `curl -X GET http://localhost:3000/api/facility/{facilityId}/equipment` returns equipment list (may need auth cookie)</verify>
  <done>API endpoint returns facility equipment list and creates new equipment with proper validation</done>
</task>

<task type="auto">
  <name>Task 3: Create add equipment page</name>
  <files>src/app/(dashboard)/facility/[facilitySlug]/equipment/new/page.tsx</files>
  <action>
Create the add equipment page at `src/app/(dashboard)/facility/[facilitySlug]/equipment/new/page.tsx`:

```tsx
'use client';

import { useState } from 'react';
import { useRouter, useParams } from 'next/navigation';
import Link from 'next/link';
import { ArrowLeft, Ship, Loader2 } from 'lucide-react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';

const equipmentSchema = z.object({
  type: z.enum(['SHELL', 'OAR', 'LAUNCH', 'OTHER']),
  name: z.string().min(1, 'Name is required').max(100),
  manufacturer: z.string().max(100).optional(),
  serialNumber: z.string().max(100).optional(),
  yearAcquired: z.string().optional().transform(val => val ? parseInt(val, 10) : undefined),
  boatClass: z.enum([
    'SINGLE_1X', 'DOUBLE_2X', 'PAIR_2_MINUS', 'COXED_PAIR_2_PLUS',
    'FOUR_4_MINUS', 'COXED_FOUR_4_PLUS', 'QUAD_4X', 'EIGHT_8_PLUS', 'OTHER', ''
  ]).optional().transform(val => val === '' ? undefined : val),
  weightCategory: z.enum(['LIGHTWEIGHT', 'MIDWEIGHT', 'HEAVYWEIGHT', '']).optional().transform(val => val === '' ? undefined : val),
  notes: z.string().max(1000).optional(),
});

type FormData = z.input<typeof equipmentSchema>;

const boatClassLabels: Record<string, string> = {
  SINGLE_1X: 'Single (1x)',
  DOUBLE_2X: 'Double (2x)',
  PAIR_2_MINUS: 'Pair (2-)',
  COXED_PAIR_2_PLUS: 'Coxed Pair (2+)',
  FOUR_4_MINUS: 'Four (4-)',
  COXED_FOUR_4_PLUS: 'Coxed Four (4+)',
  QUAD_4X: 'Quad (4x)',
  EIGHT_8_PLUS: 'Eight (8+)',
  OTHER: 'Other',
};

export default function NewFacilityEquipmentPage() {
  const router = useRouter();
  const params = useParams();
  const facilitySlug = params.facilitySlug as string;
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const { register, handleSubmit, watch, setValue, formState: { errors } } = useForm<FormData>({
    resolver: zodResolver(equipmentSchema),
    defaultValues: { type: 'SHELL' },
  });

  const selectedType = watch('type');

  const onSubmit = async (data: FormData) => {
    setIsSubmitting(true);
    setError(null);

    try {
      // Need to get facilityId from slug first
      const facilityRes = await fetch(`/api/facility/by-slug/${facilitySlug}`);
      if (!facilityRes.ok) throw new Error('Failed to get facility');
      const { facility } = await facilityRes.json();

      const response = await fetch(`/api/facility/${facility.id}/equipment`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (!response.ok) {
        const result = await response.json();
        throw new Error(result.error || 'Failed to create equipment');
      }

      router.push(`/facility/${facilitySlug}/equipment`);
      router.refresh();
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Something went wrong');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="max-w-2xl mx-auto">
      {/* Header */}
      <div className="mb-8">
        <div className="flex items-center gap-3 mb-2">
          <Link
            href={`/facility/${facilitySlug}/equipment`}
            className="text-[var(--text-muted)] hover:text-[var(--text-secondary)] transition-colors"
          >
            <ArrowLeft className="h-5 w-5" />
          </Link>
          <Ship className="h-6 w-6 text-[var(--accent)]" />
          <h1 className="text-2xl font-bold text-[var(--text-primary)]">Add Shared Equipment</h1>
        </div>
        <p className="text-[var(--text-secondary)]">
          Add facility-owned equipment that clubs can reserve
        </p>
      </div>

      {error && (
        <div className="mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400">
          {error}
        </div>
      )}

      <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
        <div className="bg-[var(--surface-1)] rounded-xl p-6 border border-[var(--border-subtle)] space-y-6">
          {/* Type */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Equipment Type *
            </label>
            <Select
              value={selectedType}
              onValueChange={(value) => setValue('type', value as 'SHELL' | 'OAR' | 'LAUNCH' | 'OTHER')}
            >
              <SelectTrigger>
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="SHELL">Boat (Shell)</SelectItem>
                <SelectItem value="OAR">Oars</SelectItem>
                <SelectItem value="LAUNCH">Launch</SelectItem>
                <SelectItem value="OTHER">Other</SelectItem>
              </SelectContent>
            </Select>
          </div>

          {/* Name */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Name *
            </label>
            <Input {...register('name')} placeholder="e.g., Facility 8+" />
            {errors.name && <p className="text-sm text-red-400 mt-1">{errors.name.message}</p>}
          </div>

          {/* Manufacturer */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Manufacturer
            </label>
            <Input {...register('manufacturer')} placeholder="e.g., Vespoli, Concept2" />
          </div>

          {/* Shell-specific fields */}
          {selectedType === 'SHELL' && (
            <>
              <div>
                <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
                  Boat Class
                </label>
                <Select
                  onValueChange={(value) => setValue('boatClass', value as FormData['boatClass'])}
                >
                  <SelectTrigger>
                    <SelectValue placeholder="Select boat class" />
                  </SelectTrigger>
                  <SelectContent>
                    {Object.entries(boatClassLabels).map(([value, label]) => (
                      <SelectItem key={value} value={value}>{label}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              <div>
                <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
                  Weight Category
                </label>
                <Select
                  onValueChange={(value) => setValue('weightCategory', value as FormData['weightCategory'])}
                >
                  <SelectTrigger>
                    <SelectValue placeholder="Select weight category" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="LIGHTWEIGHT">Lightweight</SelectItem>
                    <SelectItem value="MIDWEIGHT">Midweight</SelectItem>
                    <SelectItem value="HEAVYWEIGHT">Heavyweight</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </>
          )}

          {/* Year Acquired */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Year Acquired
            </label>
            <Input
              {...register('yearAcquired')}
              type="number"
              min="1900"
              max="2100"
              placeholder="e.g., 2024"
            />
          </div>

          {/* Serial Number */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Serial Number
            </label>
            <Input {...register('serialNumber')} placeholder="For insurance records" />
          </div>

          {/* Notes */}
          <div>
            <label className="block text-sm font-medium text-[var(--text-secondary)] mb-2">
              Notes
            </label>
            <textarea
              {...register('notes')}
              rows={3}
              className="w-full px-3 py-2 bg-[var(--surface-2)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"
              placeholder="Rigging info, restrictions, etc."
            />
          </div>
        </div>

        <div className="flex justify-end gap-3">
          <Button type="button" variant="outline" asChild>
            <Link href={`/facility/${facilitySlug}/equipment`}>Cancel</Link>
          </Button>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting ? (
              <>
                <Loader2 className="h-4 w-4 mr-2 animate-spin" />
                Creating...
              </>
            ) : (
              'Add Equipment'
            )}
          </Button>
        </div>
      </form>
    </div>
  );
}
```

Also need to create a helper API to get facility by slug. Create `src/app/api/facility/by-slug/[slug]/route.ts`:

```tsx
import { NextRequest, NextResponse } from 'next/server';
import { getClaimsForApiRoute } from '@/lib/auth/claims';
import { prisma } from '@/lib/prisma';

interface RouteContext {
  params: Promise<{ slug: string }>;
}

export async function GET(request: NextRequest, context: RouteContext) {
  const { slug } = await context.params;

  const { user, error } = await getClaimsForApiRoute();
  if (error || !user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }

  const facility = await prisma.facility.findUnique({
    where: { slug },
    select: { id: true, name: true, slug: true },
  });

  if (!facility) {
    return NextResponse.json({ error: 'Facility not found' }, { status: 404 });
  }

  // Verify user has access to this facility
  const membership = await prisma.facilityMembership.findFirst({
    where: {
      facilityId: facility.id,
      userId: user.id,
      isActive: true,
    },
  });

  if (!membership) {
    return NextResponse.json({ error: 'Forbidden' }, { status: 403 });
  }

  return NextResponse.json({ facility });
}
```
  </action>
  <verify>Navigate to /facility/{facilitySlug}/equipment/new, fill form, submit - should create equipment and redirect to list</verify>
  <done>Add equipment page creates facility-owned equipment with proper validation and redirects to list on success</done>
</task>

</tasks>

<verification>
1. Build: `npm run build` passes
2. List page: Navigate to /facility/{facilitySlug}/equipment - shows grouped equipment
3. Add button: Clicking "Add Equipment" navigates to /new page
4. Form validation: Required fields show errors, optional fields work
5. Create flow: Submitting form creates equipment and redirects to list
6. API security: Requests without FACILITY_ADMIN role return 403
</verification>

<success_criteria>
- Equipment list page shows facility-owned equipment grouped by type
- Each item shows name, manufacturer, boat class, and availability status
- Add Equipment page has form with all equipment fields
- Shell-specific fields (boat class, weight category) only show for SHELL type
- API validates FACILITY_ADMIN role before allowing changes
- Form submits to API and redirects on success
</success_criteria>

<output>
After completion, create `.planning/phases/17-facility-ui-features/17-04-SUMMARY.md`
</output>
