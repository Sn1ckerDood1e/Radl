---
phase: 34-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/delayed-spinner.tsx
  - src/components/ui/progress-indicator.tsx
  - src/components/ui/empty-state.tsx
autonomous: true

must_haves:
  truths:
    - "Spinner appears only after 300ms delay"
    - "Progress message appears only after 10 seconds"
    - "EmptyState renders differently based on variant prop"
  artifacts:
    - path: "src/components/ui/delayed-spinner.tsx"
      provides: "300ms delayed spinner component"
      exports: ["DelayedSpinner"]
    - path: "src/components/ui/progress-indicator.tsx"
      provides: "Long operation progress indicator"
      exports: ["ProgressIndicator"]
    - path: "src/components/ui/empty-state.tsx"
      provides: "Empty state with variants"
      exports: ["EmptyState"]
  key_links:
    - from: "src/components/ui/delayed-spinner.tsx"
      to: "React.useEffect"
      via: "setTimeout for delay"
      pattern: "setTimeout.*delay"
    - from: "src/components/ui/empty-state.tsx"
      to: "variant styling"
      via: "conditional className"
      pattern: "variant.*celebration|error"
---

<objective>
Create core UX feedback components for Phase 34: DelayedSpinner (300ms threshold), ProgressIndicator (10s threshold), and EmptyState variants (informational, celebration, error).

Purpose: Provide reusable building blocks that other plans will integrate. These components implement LOAD-03, LOAD-04, and EMPT-01 requirements.

Output:
- DelayedSpinner component with configurable delay (default 300ms)
- ProgressIndicator component with configurable threshold (default 10s)
- Enhanced EmptyState with variant prop and styling
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-ux-polish/34-RESEARCH.md

# Existing component patterns
@src/components/ui/skeleton.tsx
@src/components/ui/empty-state.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DelayedSpinner component</name>
  <files>src/components/ui/delayed-spinner.tsx</files>
  <action>
Create a client component that shows a spinner only after a delay (default 300ms).

Implementation:
1. Use `'use client'` directive (uses useEffect/useState)
2. Props interface: `{ delay?: number; className?: string; size?: 'sm' | 'md' | 'lg' }`
3. Use useState to track visibility, useEffect with setTimeout
4. Return null until delay passes
5. Use SVG spinner matching the style in notification-settings.tsx
6. Size variants: sm (h-4 w-4), md (h-5 w-5), lg (h-6 w-6)
7. Use brand color (text-teal-500) for spinner

Pattern from research:
```typescript
const [showSpinner, setShowSpinner] = useState(false);

useEffect(() => {
  const timer = setTimeout(() => setShowSpinner(true), delay);
  return () => clearTimeout(timer);
}, [delay]);

if (!showSpinner) return null;
```
  </action>
  <verify>
1. File exists at src/components/ui/delayed-spinner.tsx
2. Component exports DelayedSpinner
3. TypeScript compiles: `npx tsc --noEmit src/components/ui/delayed-spinner.tsx`
  </verify>
  <done>
DelayedSpinner component exists, accepts delay/size/className props, renders nothing for first {delay}ms then shows spinner.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ProgressIndicator component</name>
  <files>src/components/ui/progress-indicator.tsx</files>
  <action>
Create a client component that shows a progress message for long-running operations.

Implementation:
1. Use `'use client'` directive
2. Props interface:
   ```typescript
   interface ProgressIndicatorProps {
     isActive: boolean;        // Control visibility
     threshold?: number;       // Default 10000ms
     message?: string;         // Default "This is taking longer than expected..."
     className?: string;
   }
   ```
3. Use useState/useEffect pattern similar to DelayedSpinner
4. Show only when isActive=true AND threshold has passed
5. Reset timer when isActive changes to false
6. Style: amber color scheme (warning tone), rounded-lg, with spinning indicator
7. Include both spinner and text message

Layout:
```tsx
<div className="p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg">
  <div className="flex items-center gap-3">
    {/* Spinner */}
    <p className="text-amber-400 text-sm">{message}</p>
  </div>
</div>
```
  </action>
  <verify>
1. File exists at src/components/ui/progress-indicator.tsx
2. Component exports ProgressIndicator
3. TypeScript compiles: `npx tsc --noEmit src/components/ui/progress-indicator.tsx`
  </verify>
  <done>
ProgressIndicator component exists, shows amber warning message only after 10s (configurable) of isActive=true.
  </done>
</task>

<task type="auto">
  <name>Task 3: Enhance EmptyState with variants</name>
  <files>src/components/ui/empty-state.tsx</files>
  <action>
Extend the existing EmptyState component to support variants: informational (default), celebration, error.

Changes to make:
1. Add variant prop: `variant?: 'informational' | 'celebration' | 'error'`
2. Create variant-specific styling object:
   - informational (default): bg-zinc-800 icon container, text-zinc-500 icon
   - celebration: bg-teal-500/20 icon container, text-teal-400 icon
   - error: bg-red-500/20 icon container, text-red-400 icon
3. Apply variant styles to icon container and icon color
4. Keep all existing props and behavior unchanged (backward compatible)
5. Export EmptyStateVariant type for consumers

Implementation pattern:
```typescript
type EmptyStateVariant = 'informational' | 'celebration' | 'error';

const variantStyles = {
  informational: {
    container: 'bg-zinc-800',
    icon: 'text-zinc-500',
  },
  celebration: {
    container: 'bg-teal-500/20',
    icon: 'text-teal-400',
  },
  error: {
    container: 'bg-red-500/20',
    icon: 'text-red-400',
  },
};
```
  </action>
  <verify>
1. File updated at src/components/ui/empty-state.tsx
2. Component accepts variant prop
3. TypeScript compiles: `npx tsc --noEmit src/components/ui/empty-state.tsx`
4. Backward compatible: existing usage without variant still works
  </verify>
  <done>
EmptyState component accepts variant prop, renders with different colors for informational/celebration/error, existing usage unchanged.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Run TypeScript check: `npx tsc --noEmit`
2. Verify all three components exist and export correctly:
   - src/components/ui/delayed-spinner.tsx exports DelayedSpinner
   - src/components/ui/progress-indicator.tsx exports ProgressIndicator
   - src/components/ui/empty-state.tsx exports EmptyState with variant support
3. Run dev server: `npm run dev` - no errors on startup
</verification>

<success_criteria>
1. DelayedSpinner component renders spinner only after 300ms delay
2. ProgressIndicator component shows message only after 10s threshold
3. EmptyState component renders variant-specific styling
4. All components are client components (use hooks)
5. TypeScript compiles without errors
6. Existing EmptyState usage is backward compatible
</success_criteria>

<output>
After completion, create `.planning/phases/34-ux-polish/34-01-SUMMARY.md`
</output>
