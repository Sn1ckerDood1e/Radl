---
phase: 28-onboarding-flow-testing
plan: 05
type: execute
wave: 2
depends_on:
  - 28-01
  - 28-02
  - 28-03
  - 28-04
files_modified: []
autonomous: false
requirements:
  - ONBD-01
  - ONBD-02
  - ONBD-03
  - ONBD-04
  - ONBD-05
  - ONBD-06

must_haves:
  truths:
    - "Complete signup -> verify -> create team flow works end-to-end"
    - "Complete signup -> verify -> join team flow works end-to-end"
    - "Coach can invite member and member can successfully join"
    - "All empty states guide users to appropriate next actions"
  artifacts: []
  key_links: []
---

<objective>
Manual E2E verification of complete onboarding flow

Purpose: Verify all fixes from plans 28-01 through 28-04 work together to deliver a seamless onboarding experience. This is a human verification checkpoint to catch integration issues before marking the phase complete.

Output: Verified working onboarding flow with documented test results.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-onboarding-flow-testing/28-RESEARCH.md

# Prior plan summaries
@.planning/phases/28-onboarding-flow-testing/28-01-SUMMARY.md
@.planning/phases/28-onboarding-flow-testing/28-02-SUMMARY.md
@.planning/phases/28-onboarding-flow-testing/28-03-SUMMARY.md
@.planning/phases/28-onboarding-flow-testing/28-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify: New user signup and team creation flow (ONBD-01, ONBD-02, ONBD-03)</name>
  <what-built>
Complete signup -> email verification -> team creation flow with:
- Signup form validation
- Email verification via Supabase
- Team creation with ClubMembership
- Redirect to team dashboard
  </what-built>
  <how-to-verify>
**Test Steps:**

1. Open incognito/private browser window
2. Go to http://localhost:3000
3. Click "Sign Up" or navigate to /signup
4. Complete signup form:
   - Email: use a real email you can access (or Supabase test email)
   - Password: at least 8 characters
   - Confirm password: match
5. Submit form
6. Verify "Check your email" message appears
7. Check email inbox for verification link
8. Click verification link
9. Should redirect to / which redirects to /create-team (no existing teams)
10. Complete team creation form:
    - Team name: "Test Rowing Club"
    - Choose colors
11. Submit
12. Should land on team dashboard at /test-rowing-club

**Expected Results:**
- [ ] Signup form validates inputs correctly
- [ ] Verification email received within 1 minute
- [ ] Clicking verification link completes auth
- [ ] Redirected to team creation (not stuck on login)
- [ ] Team created successfully
- [ ] Team code displayed on dashboard
- [ ] User has coach permissions (can see "Add Equipment", "Invite" options)
  </how-to-verify>
  <resume-signal>Type "flow-1-passed" if all checks pass, or describe any issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify: Join team via link flow (ONBD-01, ONBD-05)</name>
  <what-built>
Complete unauthenticated user -> signup with redirect -> join team flow with:
- Redirect parameter preserved through signup
- Return to join page after verification
- Join request submission
- Coach approval workflow
  </what-built>
  <how-to-verify>
**Prerequisites:**
- Team created from previous test with known join code (e.g., ABCD1234)
- Logged out of that account

**Test Steps:**

1. Open incognito/private browser window
2. Go to http://localhost:3000/join/TEAMCODE (use actual team code)
3. Should redirect to /signup?redirect=/join/TEAMCODE
4. Verify URL contains redirect parameter
5. Complete signup with different email
6. Verify "Check your email" message shows context (e.g., "continue to join")
7. Click verification link in email
8. Should redirect to /join/TEAMCODE (not root page)
9. Should see join form (select role: Athlete/Parent)
10. Select "Athlete" and submit
11. Should see "Request Pending" or confirmation message

**Coach Approval (use original coach account):**
12. Log in as the coach who created the team
13. Go to /{teamSlug}/invitations or /{teamSlug}/roster
14. See pending join request
15. Approve the request
16. Log back in as the new athlete
17. Should have access to team dashboard

**Expected Results:**
- [ ] Redirect parameter appears in signup URL
- [ ] After verification, lands on /join/TEAMCODE (not /)
- [ ] Join form displays correctly
- [ ] Can submit join request
- [ ] Coach sees pending request
- [ ] Approval works
- [ ] New member appears on roster
  </how-to-verify>
  <resume-signal>Type "flow-2-passed" if all checks pass, or describe any issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify: Invitation and copy functionality (ONBD-04)</name>
  <what-built>
Invitation system with accurate messaging and copy-to-clipboard:
- Toast says "Invitation created" (not "sent")
- Copy team code button on roster page
- Copy join link button on roster and invitations pages
- Clear explanation that email is not sent
  </what-built>
  <how-to-verify>
**Test Steps (as coach):**

1. Go to /{teamSlug}/roster
2. Verify team code section displays:
   - Team code visible (8 characters)
   - Copy code button present
   - Copy link button present
3. Click "Copy code" button:
   - Toast should appear saying "Copied"
   - Paste somewhere - should be 8-character code
4. Click "Copy link" button:
   - Toast should appear
   - Paste - should be full URL like http://localhost:3000/join/ABCD1234
5. Go to /{teamSlug}/invitations
6. Verify "Share Join Link" section at top:
   - Explanation text about manual sharing
   - Copy link button
7. Create an invitation via the form:
   - Enter any email
   - Select role
   - Submit
8. Verify toast message:
   - Should say "Invitation created"
   - Should NOT say "sent" or imply email delivery
   - Description mentions sharing the link

**Expected Results:**
- [ ] Team code displayed with copy buttons on roster
- [ ] Copy code works (clipboard has 8-char code)
- [ ] Copy link works (clipboard has full join URL)
- [ ] Invitations page has prominent join link section
- [ ] Section explains email is not sent
- [ ] Invitation toast says "created" not "sent"
  </how-to-verify>
  <resume-signal>Type "flow-3-passed" if all checks pass, or describe any issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify: Empty states and onboarding guidance (ONBD-06)</name>
  <what-built>
Consistent empty states across the application:
- Equipment page empty state with CTA
- Roster page empty state (existing)
- Onboarding hints for sparse data
  </what-built>
  <how-to-verify>
**Test Steps (fresh team or delete all data):**

1. Create new team or use team with no equipment/roster

**Equipment Empty State:**
2. Go to /{teamSlug}/equipment
3. Verify empty state shows:
   - Icon (anchor/boat related)
   - Title: "No equipment yet"
   - Description with value proposition
   - "Add Equipment" button (coach only)
4. As athlete (or log in as athlete): verify no button shown

**Equipment Onboarding Banner:**
5. Add 1 piece of equipment
6. Return to equipment list
7. If < 3 items, verify onboarding banner appears for coach

**Roster Empty State:**
8. Go to /{teamSlug}/roster (with only self as member)
9. Verify invite prompt/empty state shows
10. Verify team code section displays

**General Guidance:**
11. All empty states have clear next-action CTAs
12. Styling is consistent across pages

**Expected Results:**
- [ ] Equipment empty state shows with CTA for coach
- [ ] Equipment empty state shows without CTA for athlete
- [ ] Equipment onboarding banner shows when 1-2 items
- [ ] Roster shows invite guidance when only 1 member
- [ ] All empty states follow consistent design
  </how-to-verify>
  <resume-signal>Type "flow-4-passed" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
## Summary Checklist

After all checkpoints pass:

| Requirement | Status | Notes |
|-------------|--------|-------|
| ONBD-01: User can sign up | | |
| ONBD-02: Email verification works | | |
| ONBD-03: User can create team | | |
| ONBD-04: Coach can invite members | | |
| ONBD-05: Invited user can join | | |
| ONBD-06: Empty states guide users | | |

## Known Limitations

Document any issues that were found but deemed acceptable:
- Email verification requires access to real email (Supabase test emails work)
- Invitation email not sent (by design - coaches share links manually)
</verification>

<success_criteria>
- All 4 checkpoint tasks pass human verification
- Complete onboarding flow works from signup to team access
- Join flow works for unauthenticated users with redirect
- Copy functionality works for team code and join link
- Empty states provide clear guidance
</success_criteria>

<output>
After completion, create `.planning/phases/28-onboarding-flow-testing/28-05-SUMMARY.md` documenting test results.
</output>
