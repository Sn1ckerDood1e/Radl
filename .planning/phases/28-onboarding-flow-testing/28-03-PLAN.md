---
phase: 28-onboarding-flow-testing
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/forms/invite-member-form.tsx
  - src/app/(dashboard)/[teamSlug]/roster/page.tsx
  - src/app/(dashboard)/[teamSlug]/invitations/page.tsx
autonomous: true
requirements:
  - ONBD-04

must_haves:
  truths:
    - "Invitation toast accurately describes that email is not sent"
    - "Coach can copy team code to clipboard with single click"
    - "Coach can copy join link to clipboard with single click"
  artifacts:
    - path: "src/components/forms/invite-member-form.tsx"
      provides: "Accurate toast message for invitation"
      contains: "Invitation created"
    - path: "src/app/(dashboard)/[teamSlug]/roster/page.tsx"
      provides: "Copy-to-clipboard for team code"
      contains: "navigator.clipboard"
  key_links:
    - from: "src/app/(dashboard)/[teamSlug]/roster/page.tsx"
      to: "navigator.clipboard"
      via: "onClick handler"
      pattern: "writeText"
---

<objective>
Update invitation toast message and add copy-to-clipboard for team code/join link

Purpose: Current toast says "Invitation sent" but email is not actually sent (coaches share links manually). This is misleading. Additionally, there's no easy way to copy the team code or join link.

Output: Accurate toast message and one-click copy functionality for sharing team join info.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-onboarding-flow-testing/28-RESEARCH.md

# Current implementation
@src/components/forms/invite-member-form.tsx
@src/app/(dashboard)/[teamSlug]/roster/page.tsx
@src/app/(dashboard)/[teamSlug]/invitations/page.tsx
@src/app/(dashboard)/[teamSlug]/invitations/invitations-client.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update invitation toast message to be accurate</name>
  <files>src/components/forms/invite-member-form.tsx</files>
  <action>
Update the success toast in InviteMemberForm to accurately describe what happened.

Current (misleading):
```typescript
showSuccessToast('Invitation sent', `Sent to ${data.email}`);
```

Updated (accurate):
```typescript
showSuccessToast(
  'Invitation created',
  'Share the join link with this member to let them join'
);
```

This accurately reflects that:
1. An invitation record was created in the database
2. No email was sent (coaches share the join link manually)
3. The invitee needs to use the join link to accept
  </action>
  <verify>
1. Go to /{teamSlug}/invitations
2. Submit the invite form with any email
3. Toast should say "Invitation created" with description about sharing join link
4. Toast should NOT say "sent" or imply email delivery
  </verify>
  <done>Invitation toast accurately describes that coaches share join link manually</done>
</task>

<task type="auto">
  <name>Task 2: Add copy-to-clipboard for team code on roster page</name>
  <files>src/app/(dashboard)/[teamSlug]/roster/page.tsx</files>
  <action>
Convert the roster page to a client component wrapper or add a client component for the team code section with copy functionality.

Option A: Create a small client component for the copy button
Option B: Make the team code section a client component

Recommended: Option A - Create a CopyButton component or inline client component.

Add to the team code display section:
1. A copy button/icon next to the team code
2. A copy button for the full join link (e.g., `https://app.radl.com/join/{teamCode}`)
3. Toast feedback on successful copy

Implementation pattern:
```tsx
'use client';

import { useState } from 'react';
import { Copy, Check } from 'lucide-react';
import { showSuccessToast } from '@/lib/toast-helpers';

function CopyTeamCode({ code, joinUrl }: { code: string; joinUrl: string }) {
  const [copied, setCopied] = useState<'code' | 'link' | null>(null);

  const copyCode = async () => {
    await navigator.clipboard.writeText(code);
    setCopied('code');
    showSuccessToast('Copied!', 'Team code copied to clipboard');
    setTimeout(() => setCopied(null), 2000);
  };

  const copyLink = async () => {
    await navigator.clipboard.writeText(joinUrl);
    setCopied('link');
    showSuccessToast('Copied!', 'Join link copied to clipboard');
    setTimeout(() => setCopied(null), 2000);
  };

  return (
    <div className="flex items-center gap-3">
      <div className="text-2xl font-mono font-bold text-emerald-400 bg-zinc-800 px-4 py-2 rounded-lg border border-zinc-700">
        {code}
      </div>
      <button onClick={copyCode} className="..." title="Copy code">
        {copied === 'code' ? <Check /> : <Copy />}
      </button>
      <button onClick={copyLink} className="..." title="Copy join link">
        Copy Link
      </button>
    </div>
  );
}
```

The join URL should be constructed as: `${window.location.origin}/join/${code}`

Move the team code display to use this new component.
  </action>
  <verify>
1. Go to /{teamSlug}/roster as coach
2. See team code displayed with copy buttons
3. Click copy code button - clipboard should have the 8-char code
4. Click copy link button - clipboard should have full URL like `http://localhost:3000/join/ABCD1234`
5. Toast appears confirming copy
  </verify>
  <done>Coach can one-click copy team code or full join link from roster page</done>
</task>

<task type="auto">
  <name>Task 3: Add copy-to-clipboard on invitations page</name>
  <files>src/app/(dashboard)/[teamSlug]/invitations/page.tsx, src/app/(dashboard)/[teamSlug]/invitations/invitations-client.tsx</files>
  <action>
Add team code and join link display with copy functionality to the invitations page header.

The invitations page should prominently display the join link that coaches need to share, since this is the primary workflow (not email).

Add a section at the top of the invitations page (before the tabs):
```tsx
<div className="bg-zinc-900 rounded-xl border border-zinc-800 p-6 mb-6">
  <h3 className="font-semibold text-white mb-2">Share Join Link</h3>
  <p className="text-sm text-zinc-400 mb-4">
    Invitations are not sent by email. Share this link with athletes and parents.
  </p>
  <CopyJoinLink code={team.joinCode} />
</div>
```

This makes it clear that coaches need to share the link manually, and provides easy access to do so.

The CopyJoinLink component (client component) should:
1. Display the full join URL
2. Have a prominent "Copy Link" button
3. Show toast on successful copy
  </action>
  <verify>
1. Go to /{teamSlug}/invitations as coach
2. See prominent "Share Join Link" section at top
3. Join URL is displayed
4. Copy button works and shows toast
5. Explanation text clarifies email is not sent
  </verify>
  <done>Invitations page prominently displays join link with copy functionality and clear explanation</done>
</task>

</tasks>

<verification>
## Toast message verification

1. Create invitation via form
2. Toast says "Invitation created" (not "sent")
3. Description mentions sharing join link

## Copy functionality verification

Roster page:
1. Copy code button -> clipboard has "ABCD1234" (8 chars)
2. Copy link button -> clipboard has "http://localhost:3000/join/ABCD1234"

Invitations page:
1. Copy link button -> clipboard has full join URL
2. Explanation text visible about manual sharing

## User flow verification

1. Coach creates invitation for athlete@example.com
2. Coach sees toast about sharing link (not email sent)
3. Coach clicks copy link
4. Coach pastes link into message to athlete
5. Athlete uses link to join
</verification>

<success_criteria>
- Toast says "Invitation created" not "Invitation sent"
- Roster page has copy buttons for code and link
- Invitations page has prominent join link section with copy
- All copy actions show success toast
- Clear messaging that email is not sent
</success_criteria>

<output>
After completion, create `.planning/phases/28-onboarding-flow-testing/28-03-SUMMARY.md`
</output>
