# Domain Pitfalls: Production Launch with Native Apps

**Project:** Radl v3.0 - Production Launch
**Researched:** 2026-01-29
**Scope:** SaaS launch, PWA-to-native wrapper, branding, legal compliance, UX polish

---

## Critical Pitfalls

Mistakes that cause App Store rejection, legal liability, or major rewrites.

### Pitfall 1: App Store Rejection for "Web Clipping"

**What goes wrong:** Apple rejects wrapped PWA apps under Rule 4.2.2 (web clipping prohibition). The app is seen as "a website zipped up in a WebView" with insufficient native value.

**Why it happens:** Developers assume wrapping existing PWA with Capacitor is sufficient. Apple requires apps to "elevate beyond a repackaged website" and provide "mobile-specific value."

**Consequences:**
- App rejected, launch delayed
- May require significant native feature additions
- Inconsistent review process means approval on first submit, rejection on updates

**Warning signs:**
- No native features beyond PWA capabilities
- Screenshots show identical UI to web version
- Navigation feels browser-like, not app-like

**Prevention:**
1. Add native-exclusive features: haptic feedback, native share sheets, biometric auth
2. Implement proper iOS navigation patterns (swipe back, tab bar)
3. Use Capacitor plugins for device APIs (camera, push notifications with native UI)
4. Test multiple submission cycles in TestFlight before production

**Which phase:** Native App Wrapper phase - must be addressed before App Store submission

**Confidence:** HIGH - [App Store Review Guidelines](https://www.mobiloud.com/blog/app-store-review-guidelines-webview-wrapper), [Apple Rule 4.2.2](https://nextnative.dev/blog/app-store-review-guidelines)

---

### Pitfall 2: iOS Push Notification Token Mismatch

**What goes wrong:** Push notifications work on Android but silently fail on iOS. Firebase Console shows messages sent, but devices never receive them.

**Why it happens:** Capacitor's standard push plugin returns native APNs tokens (hexadecimal), but Firebase Cloud Messaging expects FCM tokens. Developers don't realize the token format difference.

**Consequences:**
- iOS users never receive notifications
- Silent failure makes debugging difficult
- May not discover until production with real users

**Warning signs:**
- Push works perfectly in Android simulator
- iOS shows "permission granted" but no notifications arrive
- Firebase Console shows successful delivery to iOS tokens

**Prevention:**
1. Use `@capacitor-firebase/messaging` instead of standard Capacitor Push plugin
2. Verify token format in logs (FCM tokens are longer, different format than APNs)
3. Test with real iOS devices, not just simulators
4. Implement notification delivery receipts for monitoring

**Which phase:** Native App Wrapper phase - critical path for app functionality

**Confidence:** HIGH - [Capacitor Push Notification Guide](https://dev.to/saltorgil/the-complete-guide-to-capacitor-push-notifications-ios-android-firebase-bh4)

---

### Pitfall 3: Cookie Consent Banner That Doesn't Actually Block

**What goes wrong:** Cookie consent banner displays correctly, but tracking cookies fire before consent. Leads to GDPR fines (SHEIN: EUR150M in Sept 2025 for exactly this).

**Why it happens:**
- Relying solely on Google Tag Manager without automatic script blocking
- GTM controls when tags fire but doesn't prevent third-party scripts from executing independently
- "Reject All" button implemented visually but not functionally

**Consequences:**
- GDPR fines up to EUR20M or 4% global revenue
- EUR5.88 billion in GDPR fines issued since 2018
- 96-97% of websites have at least one cookie consent violation

**Warning signs:**
- Network tab shows tracking pixels firing before consent click
- Cookie consent implementation done "quickly" without verification
- Using template solutions without understanding what they block

**Prevention:**
1. Audit with browser dev tools: verify no tracking requests before consent
2. Test "Reject All" - verify cookies are actually not set
3. Implement Global Privacy Control (GPC) detection and automatic opt-out
4. Use server-side consent verification, not just client-side
5. Equal visual weight for Accept/Reject buttons (Austria 2025 ruling)

**Which phase:** Legal Compliance phase - must be verified before launch

**Confidence:** HIGH - [Cookie Banner Design 2026](https://secureprivacy.ai/blog/cookie-banner-design-2026), [GDPR Cookie Consent 2025](https://secureprivacy.ai/blog/gdpr-cookie-consent-requirements-2025)

---

### Pitfall 4: In-App Purchase Requirement Violation

**What goes wrong:** App offering subscriptions without Apple IAP gets rejected, or worse, approved then later removed from store.

**Why it happens:** Confusion about when IAP is required. 2025 court rulings allow external payment links but most apps must ALSO offer IAP.

**Consequences:**
- App rejection or removal
- Loss of existing subscribers if app removed
- Need to rebuild payment flow

**Warning signs:**
- Subscription handled entirely through web/Stripe
- No StoreKit integration in native wrapper
- Assuming "reader app" exception applies when it doesn't

**Prevention:**
1. If offering subscriptions, implement IAP alongside external payments
2. Use RevenueCat or similar to manage both IAP and web payments
3. Understand "reader app" exception only applies to specific categories (Spotify, Netflix)
4. For U.S. store: can include external payment link, but still need IAP option
5. Validate receipts server-side to prevent fraud

**Which phase:** Native App Wrapper phase - payment flow must be designed early

**Confidence:** HIGH - [Apple IAP Compliance 2025](https://twinr.dev/blogs/ios-in-app-purchase-compliance/), [RevenueCat Anti-Steering Ruling](https://www.revenuecat.com/blog/growth/apple-anti-steering-ruling-monetization-strategy/)

---

### Pitfall 5: Privacy Policy Missing Required Elements

**What goes wrong:** Privacy policy exists but doesn't meet 2025-2026 requirements. Multiple U.S. states now have specific requirements; GDPR enforcement intensified.

**Why it happens:**
- Using template from 2020-2023
- Not updating for new state laws (20 U.S. states with comprehensive privacy laws by Jan 2026)
- Missing AI/third-party data sharing disclosures (Apple requirement since Nov 2025)

**Consequences:**
- App rejection (Apple requires privacy policy disclosure for AI usage)
- GDPR fines for EU users
- California CCPA violations
- 20+ different U.S. state law violations

**Warning signs:**
- Privacy policy hasn't been updated in 12+ months
- No mention of data processing locations
- No clear data deletion process described
- Missing state-specific opt-out mechanisms

**Prevention:**
1. Review against 2026 GDPR, CCPA, and state-specific requirements
2. Add explicit AI/ML data usage disclosure if applicable
3. Implement Global Privacy Control (GPC) recognition (required in CA, KY, RI, IN as of Jan 2026)
4. Document data processing for each feature
5. Provide clear deletion request mechanism

**Which phase:** Legal Compliance phase - must be complete before App Store submission

**Confidence:** HIGH - [SaaS Privacy Compliance 2025](https://secureprivacy.ai/blog/saas-privacy-compliance-requirements-2025-guide), [Privacy Laws 2026](https://secureprivacy.ai/blog/privacy-laws-2026)

---

## Moderate Pitfalls

Mistakes that cause delays, poor user experience, or technical debt.

### Pitfall 6: Safe Area Inset Handling Broken

**What goes wrong:** UI elements hidden behind notch/Dynamic Island, bottom navigation covered by home indicator, content cut off on different device sizes.

**Why it happens:**
- Not using `viewport-fit=cover` meta tag
- Applying safe-area-inset padding inconsistently
- Testing only on one device type
- Forgetting that `env(safe-area-inset-*)` values are contextual

**Consequences:**
- App looks "cheap" and unpolished
- Critical UI elements unreachable
- Different breakage on different devices

**Warning signs:**
- Only tested on one iPhone model
- Footer buttons hard to tap
- Content appears under notch in landscape

**Prevention:**
1. Add `<meta name="viewport" content="viewport-fit=cover">` to enable full-screen
2. Apply `env(safe-area-inset-*)` to fixed position elements (nav, footer, sidebar)
3. Use `calc()` to combine padding: `padding-bottom: calc(0.5rem + env(safe-area-inset-bottom))`
4. Test on iPhone SE, iPhone 15 Pro Max, and iPad
5. Test in both portrait and landscape orientations

**Which phase:** UX Polish phase - visual testing across devices

**Confidence:** HIGH - [iOS Safe Area CSS Guide](https://jipfr.nl/blog/supporting-ios-web/), [The Notch and CSS](https://css-tricks.com/the-notch-and-css/)

---

### Pitfall 7: Dark Mode Breaking Brand Identity

**What goes wrong:** Dark mode implemented as simple color inversion. Brand colors look muddy, text becomes illegible, app feels like "knockoff of every other app."

**Why it happens:**
- Treating dark mode as afterthought
- Using mid-grey text for "elegance" (kills legibility)
- Not adapting illustrations/icons for dark backgrounds
- Blue-on-black, dark-green-on-navy color combinations

**Consequences:**
- Accessibility complaints
- Brand dilution
- Users avoid dark mode, negating the feature

**Warning signs:**
- Dark mode designed in 1 day
- No design review of dark mode specifically
- Using same images/illustrations in both modes

**Prevention:**
1. Design dark mode as separate, intentional palette
2. Use off-white (#FAFAFA or similar) for text, not grey
3. Reserve saturated colors for accents only
4. Create dark-mode-specific versions of illustrations/icons
5. Test with low-vision users and on older monitors
6. Verify contrast ratios meet WCAG AA (4.5:1 for text)

**Which phase:** Branding Update phase - design dark mode deliberately

**Confidence:** MEDIUM - [Dark Mode Design Trends](https://webwave.me/blog/dark-mode-design-trends), [SaaS Design Trends 2026](https://www.designstudiouiux.com/blog/top-saas-design-trends/)

---

### Pitfall 8: Push Notification Permission Request Too Early

**What goes wrong:** Users deny push notification permission on first app open. Once denied, recovery requires users to manually go to Settings > Notifications.

**Why it happens:**
- Requesting permission immediately on app launch
- No context given for why notifications matter
- "All or nothing" permission approach

**Consequences:**
- 40-60% of users deny permission
- No way to re-prompt programmatically
- Lost engagement channel permanently

**Warning signs:**
- Permission prompt appears before user takes any action
- No custom pre-permission screen explaining value
- Permission requested on every app type identically

**Prevention:**
1. Show custom pre-permission screen explaining notification value FIRST
2. Only request after user experiences app benefit (e.g., after creating first lineup)
3. Offer granular notification preferences (let users choose what they receive)
4. Time request at meaningful moment (after completing key action)
5. If denied, show in-app guidance for enabling in Settings later

**Which phase:** UX Polish phase - implement thoughtful permission flow

**Confidence:** HIGH - [Push Notification Best Practices 2026](https://reteno.com/blog/push-notification-best-practices-ultimate-guide-for-2026), [iOS Push Permission Best Practices](https://blog.hurree.co/ios-push-notification-permissions-best-practises)

---

### Pitfall 9: Android Deep Links / Universal Links Not Verified

**What goes wrong:** Deep links work inconsistently. Some Android versions suggest opening in app, others open in browser. Links from certain apps (email clients) never open in app.

**Why it happens:**
- Wrong SHA256 fingerprint in `assetlinks.json`
- Android 12+ requires verified `assetlinks.json` (Android 11 was more lenient)
- iOS `apple-app-site-association` file not at correct path or wrong format

**Consequences:**
- Shared links don't open app
- Invitation links open in browser instead of app
- QR codes to equipment don't work as expected

**Warning signs:**
- Works on Android 11 but not Android 12+
- Works when clicking link in Chrome but not in Gmail
- "Open by default" settings show no verified links

**Prevention:**
1. Generate correct SHA256 from your release keystore (not debug)
2. Host `assetlinks.json` at `/.well-known/assetlinks.json` (exact path)
3. Host `apple-app-site-association` at `/.well-known/apple-app-site-association`
4. Test on Android 12+ specifically
5. Use Google's [Digital Asset Links validator](https://developers.google.com/digital-asset-links/tools/generator)
6. Implement `appUrlOpen` event handler in Capacitor for routing

**Which phase:** Native App Wrapper phase - must be configured during build

**Confidence:** HIGH - [Capacitor Deep Links Guide](https://capacitorjs.com/docs/guides/deep-links), [Deep Links Capacitor Setup](https://devdactic.com/setup-deep-links-capacitor)

---

### Pitfall 10: App Screenshots Rejected or Misrepresentative

**What goes wrong:** App Store rejects screenshots for being "exaggerated," "not representative," or containing prohibited content. Or screenshots pass review but don't match actual app.

**Why it happens:**
- Screenshots from old version of app
- Marketing claims like "#1 app" without proof
- Pricing/promotional content in screenshots
- iPhone screenshots used in iPad layout

**Consequences:**
- App rejection, delayed launch
- User complaints about misleading screenshots
- Trust erosion when app doesn't match preview

**Warning signs:**
- Screenshots created before final UI polish
- Marketing team created screenshots without developer review
- Screenshots show features not yet implemented

**Prevention:**
1. Create screenshots from final build only
2. Use only actual in-app UI (no mockups or enhanced versions)
3. Avoid marketing claims ("Best app," "#1," "Free for limited time")
4. Follow 2026 requirements: 6.9" iPhone + 13" iPad sets
5. Export as PNG (preserves UI detail better than JPEG)
6. Review first 2-3 screenshots carefully - they drive conversions

**Which phase:** Native App Wrapper phase - final step before submission

**Confidence:** HIGH - [App Store Screenshots Guidelines 2026](https://theapplaunchpad.com/blog/app-store-screenshots-guidelines-in-2026), [Screenshot Specifications](https://developer.apple.com/help/app-store-connect/reference/app-information/screenshot-specifications/)

---

### Pitfall 11: Slow App Startup Time

**What goes wrong:** Native-wrapped app takes 3-5+ seconds to show first meaningful content. Users perceive app as slow/broken.

**Why it happens:**
- Loading all resources at startup
- Heavy libraries initialized before first screen
- Blocking network calls during startup
- Each SDK adds startup overhead

**Consequences:**
- Android vitals flags app (cold start >5s is "excessive")
- Apple recommends ~400ms cold launch
- Users abandon slow apps immediately

**Warning signs:**
- No measurement of startup time
- Multiple SDK initializations in app entry point
- First screen waits for API response

**Prevention:**
1. Measure startup time: target <2s cold start, <1s for high-performing apps
2. Lazy initialize non-critical SDKs after first screen renders
3. Show skeleton/placeholder UI immediately, load data async
4. Move heavy operations off main thread
5. Use Android Baseline Profiles for ~30% faster launch
6. Defer analytics, crash reporting initialization

**Which phase:** UX Polish phase - performance optimization pass

**Confidence:** HIGH - [Android Launch Time](https://developer.android.com/topic/performance/vitals/launch-time), [iOS Launch Time Optimization](https://www.avanderlee.com/optimization/launch-time-performance-optimization/)

---

## Minor Pitfalls

Mistakes that cause annoyance but are recoverable.

### Pitfall 12: Capacitor Version / Android Studio Incompatibility

**What goes wrong:** Fresh Android Studio 2025.2.3 installation fails to build Capacitor 8 project due to AGP version mismatch.

**Prevention:**
1. Pin Android Studio version in team documentation
2. Check Capacitor release notes for Android Studio requirements
3. Capacitor 8 requires Android Studio Otter 2025.2.1 or newer
4. Capacitor 8 requires NodeJS 22+
5. Watch for `getDefaultProguardFile` errors - use `proguard-android-optimize.txt`

**Which phase:** Native App Wrapper phase - development environment setup

**Confidence:** HIGH - [Capacitor 8 Migration Guide](https://capacitorjs.com/docs/updating/8-0), [Capacitor Issue #8314](https://github.com/ionic-team/capacitor/issues/8314)

---

### Pitfall 13: iOS Status Bar Disappearing After Camera Use

**What goes wrong:** Status bar vanishes on iOS after user cancels camera/photo picker without selecting an image.

**Prevention:**
1. Known Capacitor bug - check for updates to status bar plugin
2. Implement workaround: manually reset status bar visibility after camera dismissal
3. Test camera cancel flow specifically

**Which phase:** UX Polish phase - edge case testing

**Confidence:** HIGH - [Capacitor Plugin Issue #2310](https://github.com/ionic-team/capacitor-plugins/issues/2310)

---

### Pitfall 14: Branding Update Breaking Existing URLs/SEO

**What goes wrong:** Domain change or URL restructure during rebrand wipes out SEO equity and breaks external links.

**Prevention:**
1. Keep existing URLs, add redirects if structure must change
2. Update all external link sources (documentation, emails, QR codes)
3. Monitor 404s post-launch
4. Don't change domain unless absolutely necessary

**Which phase:** Branding Update phase - coordinate with any URL changes

**Confidence:** MEDIUM - [B2B SaaS Rebranding Guide](https://www.poweredbysearch.com/blog/b2b-saas-website-rebranding-guide/)

---

### Pitfall 15: Offline Sync Conflicts Causing Data Loss

**What goes wrong:** User makes changes offline, another user makes conflicting changes online, sync overwrites one set of changes without warning.

**Why it happens:** Existing PWA offline support may use "last write wins" strategy without conflict UI.

**Prevention:**
1. Implement conflict detection (compare timestamps/versions)
2. Show manual conflict resolution UI for critical data
3. Keep audit log of sync decisions
4. Test 8+ hour offline scenarios with 500+ queued items
5. Target <1% sync error rate

**Which phase:** May already be handled in existing PWA - verify during testing

**Confidence:** MEDIUM - [PWA Offline Sync Guide](https://gtcsys.com/comprehensive-faqs-guide-data-synchronization-in-pwas-offline-first-strategies-and-conflict-resolution/)

---

## Phase-Specific Risk Summary

| Phase | Critical Pitfalls | Key Prevention |
|-------|------------------|----------------|
| Native App Wrapper | App Store rejection (#1), Push tokens (#2), IAP (#4), Deep links (#9), Screenshots (#10), Build issues (#12) | Add native features, use correct push plugin, implement IAP, verify deep links |
| Branding Update | Dark mode (#7), URL breaking (#14) | Design dark mode deliberately, preserve URLs |
| Legal Compliance | Cookie consent (#3), Privacy policy (#5) | Verify blocking works, update for 2026 requirements |
| UX Polish | Safe areas (#6), Push permission (#8), Startup time (#11), Status bar (#13), Offline sync (#15) | Test all device sizes, thoughtful permission flow, measure startup |

---

## Pre-Launch Verification Checklist

### App Store Readiness
- [ ] Native features beyond PWA capabilities documented
- [ ] iOS push notifications tested with real device (not simulator)
- [ ] Screenshots match final build exactly
- [ ] No marketing claims without proof
- [ ] IAP implemented (if offering subscriptions)
- [ ] Deep links verified on Android 12+ and iOS

### Legal Compliance
- [ ] Cookie consent actually blocks tracking (verified via network tab)
- [ ] "Reject All" stops cookies (tested)
- [ ] Privacy policy updated for 2026 requirements
- [ ] Global Privacy Control (GPC) detection implemented
- [ ] Accept/Reject buttons have equal visual weight

### UX Quality
- [ ] Safe area insets applied to all fixed elements
- [ ] Tested on iPhone SE, iPhone 15 Pro Max, iPad
- [ ] Tested in portrait and landscape
- [ ] Dark mode reviewed for legibility and brand consistency
- [ ] Push permission flow includes pre-permission explanation
- [ ] Cold startup <2 seconds measured

### Technical Stability
- [ ] Android Studio / Capacitor versions documented
- [ ] Camera cancel flow tested (status bar bug)
- [ ] Offline sync conflict handling verified
- [ ] Release keystore SHA256 in assetlinks.json (not debug)

---

## Sources

### App Store & Native Apps
- [App Store Review Guidelines - WebView](https://www.mobiloud.com/blog/app-store-review-guidelines-webview-wrapper)
- [App Store Review Guidelines 2025](https://nextnative.dev/blog/app-store-review-guidelines)
- [Capacitor Push Notifications Guide](https://dev.to/saltorgil/the-complete-guide-to-capacitor-push-notifications-ios-android-firebase-bh4)
- [Capacitor Deep Links](https://capacitorjs.com/docs/guides/deep-links)
- [iOS IAP Compliance 2025](https://twinr.dev/blogs/ios-in-app-purchase-compliance/)
- [App Store Screenshots 2026](https://theapplaunchpad.com/blog/app-store-screenshots-guidelines-in-2026)

### Legal & Compliance
- [SaaS Privacy Compliance 2025](https://secureprivacy.ai/blog/saas-privacy-compliance-requirements-2025-guide)
- [Privacy Laws 2026](https://secureprivacy.ai/blog/privacy-laws-2026)
- [Cookie Banner Design 2026](https://secureprivacy.ai/blog/cookie-banner-design-2026)
- [GDPR Cookie Consent 2025](https://secureprivacy.ai/blog/gdpr-cookie-consent-requirements-2025)

### UX & Performance
- [iOS Safe Area CSS](https://jipfr.nl/blog/supporting-ios-web/)
- [Dark Mode Design Trends](https://webwave.me/blog/dark-mode-design-trends)
- [Push Notification Best Practices 2026](https://reteno.com/blog/push-notification-best-practices-ultimate-guide-for-2026)
- [Android Launch Time](https://developer.android.com/topic/performance/vitals/launch-time)
- [iOS Launch Time Optimization](https://www.avanderlee.com/optimization/launch-time-performance-optimization/)

### Technical Issues
- [Capacitor 8 Migration](https://capacitorjs.com/docs/updating/8-0)
- [Capacitor Status Bar Bug](https://github.com/ionic-team/capacitor-plugins/issues/2310)
- [PWA Offline Sync](https://gtcsys.com/comprehensive-faqs-guide-data-synchronization-in-pwas-offline-first-strategies-and-conflict-resolution/)
