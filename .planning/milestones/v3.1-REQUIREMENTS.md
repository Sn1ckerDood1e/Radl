# Requirements Archive: v3.1 Admin Panel

**Archived:** 2026-01-31
**Status:** SHIPPED

This is the archived requirements specification for v3.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Radl v3.1 Admin Panel

**Defined:** 2026-01-30
**Core Value:** Platform owner can manage all users, clubs, and memberships through a super-admin panel

## v3.1 Requirements

Super-admin panel for platform management with full CRUD operations, admin-created user onboarding, and audit compliance.

### Authentication & Foundation

- [x] **AUTH-01**: Super admin role stored in database table (not JWT claims only)
- [x] **AUTH-02**: Super admin login verified against database on every request
- [x] **AUTH-03**: Admin session timeout at 30 minutes of inactivity
- [x] **AUTH-04**: Super admin check in CASL abilities (`can('manage', 'all')`)
- [x] **AUTH-05**: Separate `(admin)` route group with protected layout
- [x] **AUTH-06**: MFA enforcement for super admin accounts

### User Management

- [x] **USER-01**: List all users with pagination (25 per page)
- [x] **USER-02**: Search users by email, name, facility, club
- [x] **USER-03**: Create user bypassing signup (admin sets email, generates password link)
- [x] **USER-04**: View user details (profile, memberships, created date, last login)
- [x] **USER-05**: Edit user profile (name, email, phone)
- [x] **USER-06**: Deactivate user (soft disable, blocks login, preserves data)
- [x] **USER-07**: Reactivate deactivated user
- [x] **USER-08**: Reset user password (generate recovery link via Supabase Admin API)
- [x] **USER-09**: Bulk user creation via CSV upload (email, name, optional role)

### Facility Management

- [x] **FCLT-01**: List all facilities with club counts and member counts
- [x] **FCLT-02**: Create facility (name, slug, location, contact info)
- [x] **FCLT-03**: Edit facility details
- [x] **FCLT-04**: View facility details with clubs and aggregate stats
- [x] **FCLT-05**: Delete facility (soft delete with confirmation, cascade check)

### Club Management

- [x] **CLUB-01**: List all clubs with member counts (global and by facility)
- [x] **CLUB-02**: Create club (name, facility assignment, colors)
- [x] **CLUB-03**: Edit club details
- [x] **CLUB-04**: View club details with members and settings
- [x] **CLUB-05**: Delete club (soft delete with confirmation, cascade check)
- [x] **CLUB-06**: Move club between facilities

### Membership Management

- [x] **MEMB-01**: Add user to club with role(s) (bypasses invitation flow)
- [x] **MEMB-02**: Remove user from club
- [x] **MEMB-03**: Change user roles within club
- [x] **MEMB-04**: View all memberships for a user (cross-org visibility)
- [x] **MEMB-05**: Bulk add users to club via CSV (email + role)

### Audit Logging

- [x] **AUDT-01**: Log all admin actions (actor, action, target, timestamp, before/after)
- [x] **AUDT-02**: Audit log viewer in admin panel (filterable by action, actor, date)
- [x] **AUDT-03**: Audit log export (CSV download with date range filter)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| AUTH-01 | Phase 36 | Complete |
| AUTH-02 | Phase 36 | Complete |
| AUTH-03 | Phase 36 | Complete |
| AUTH-04 | Phase 36 | Complete |
| AUTH-05 | Phase 36 | Complete |
| AUTH-06 | Phase 36 | Complete |
| USER-01 | Phase 37 | Complete |
| USER-02 | Phase 37 | Complete |
| USER-03 | Phase 37 | Complete |
| USER-04 | Phase 37 | Complete |
| USER-05 | Phase 37 | Complete |
| USER-06 | Phase 37 | Complete |
| USER-07 | Phase 37 | Complete |
| USER-08 | Phase 37 | Complete |
| USER-09 | Phase 37 | Complete |
| FCLT-01 | Phase 38 | Complete |
| FCLT-02 | Phase 38 | Complete |
| FCLT-03 | Phase 38 | Complete |
| FCLT-04 | Phase 38 | Complete |
| FCLT-05 | Phase 38 | Complete |
| CLUB-01 | Phase 38 | Complete |
| CLUB-02 | Phase 38 | Complete |
| CLUB-03 | Phase 38 | Complete |
| CLUB-04 | Phase 38 | Complete |
| CLUB-05 | Phase 38 | Complete |
| CLUB-06 | Phase 38 | Complete |
| MEMB-01 | Phase 39 | Complete |
| MEMB-02 | Phase 39 | Complete |
| MEMB-03 | Phase 39 | Complete |
| MEMB-04 | Phase 39 | Complete |
| MEMB-05 | Phase 39 | Complete |
| AUDT-01 | Phase 36 | Complete |
| AUDT-02 | Phase 40 | Complete |
| AUDT-03 | Phase 40 | Complete |

---

## Milestone Summary

**Shipped:** 34 of 34 v3.1 requirements
**Adjusted:** None
**Dropped:** None

All requirements implemented as specified. No scope changes during milestone.

---

*Archived: 2026-01-31 as part of v3.1 milestone completion*
